{% extends "base.html" %}
{% load static %}

{% block title %}Neuer Musik-Eintrag{% endblock %}

{% block content %}
  <h1>Produkt hinzufügen</h1>

  <label for="entry-type">Typ auswählen:</label>
  <select id="entry-type" name="entry_type" onchange="toggleFormSections()">
    <option value="" selected disabled>Bitte wählen</option>
    <option value="artist">Artist</option>
    <option value="album">Album</option>
    <option value="track">Track</option>
  </select>

  <p>
    <a href="{% url 'customerService' %}">Zurück zum Dashboard</a>
  </p>

  
  <form id="artist-form" method="post" action="{% url 'add_artist' %}" style="display: none;">
    {% csrf_token %}
    <h2>Artist hinzufügen</h2>
    <label for="name">Name:</label>
    <input type="text" name="name" required><br>

    <label for="genre">Genre:</label>
    <input type="text" name="genre" required><br>

    <label for="dateOfBirth">Geburtsdatum:</label>
    <input type="date" name="dateOfBirth" required><br>

    <label for="country">Land:</label>
    <input type="text" name="country"><br>

    <label for="bio">Biografie:</label><br>
    <textarea name="bio" rows="4"></textarea><br>

    <button type="submit">Artist speichern</button>
  </form>

  
  <form id="album-form" method="post" action="{% url 'add_album' %}" style="display: none;">
    {% csrf_token %}
    <h2>Album hinzufügen</h2>
    <label for="title">Titel:</label>
    <input type="text" name="title" required><br>

    <label for="artist">Artist (ID oder Name):</label>
    <input type="text" name="artist" required><br>

    <label for="releaseDate">Veröffentlichungsdatum:</label>
    <input type="date" name="releaseDate" required><br>

    <label for="price">Preis:</label>
    <input type="number" name="price" step="0.01" required><br>

    <button type="submit">Album speichern</button>
  </form>

  
  <form id="track-form" method="post" action="{% url 'add_track' %}" style="display: none;">
    {% csrf_token %}
    <h2>Track hinzufügen</h2>
    <label for="title">Titel:</label>
    <input type="text" name="title" required><br>

    <label for="album">Album (ID oder Titel):</label>
    <input type="text" name="album" required><br>

    <label for="duration">Dauer (HH:MM:SS):</label>
    <input type="text" name="duration" placeholder="00:03:30" required><br>

    <button type="submit">Track speichern</button>
  </form>

  <script>
    function toggleFormSections() {
      const selected = document.getElementById("entry-type").value;
      document.getElementById("artist-form").style.display = selected === "artist" ? "block" : "none";
      document.getElementById("album-form").style.display = selected === "album" ? "block" : "none";
      document.getElementById("track-form").style.display = selected === "track" ? "block" : "none";
    }
  </script>
{% endblock %}